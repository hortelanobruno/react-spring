<div class="col-sm-9 col-sm-offset-3 col-md-10 col-md-offset-2 main">
    <h1 id="titulo" class="page-header"></h1>
    <h2 id="timestamp" class="sub-header"></h2>
    <div class="table-responsive">
        <div class="animate-switch-container">
            <div class="animate-switch">
                <table id="tabla" class="table table-striped">
                </table>
            </div>
        </div>
    </div>
</div>
<script type="text/javascript">
    if (cdrData !== null) {
        $("#template-result-panel #titulo").text(cdrData.templateName);

        if ((cdrData.timestamp !== null) && (cdrData.timestamp !== undefined)) {
            $("#template-result-panel #timestamp").text(new Date(cdrData.timestamp * 1000));

            var thead = "<thead>";
            thead += "<tr><th>Device</th>";
            if (cdrData.cdrs[0].pkg != null) {
                thead += "<th>Package</th>";
            }
            if (cdrData.cdrs[0].service != null) {
                thead += "<th>Services</th>";
            }
            thead += "<th>Quality</th>";
            for (var cat in cdrData.categories) {
                thead += "<th>" + cdrData.categories[cat] + "</th>";
            }
            thead += "<th>Streams</th>";
            thead += "</tr></thead>";

            $("#template-result-panel #tabla").append(thead);

            var tbody = "<tbody>";
            for (var cdr in cdrData.cdrs) {
                tbody += "<tr>";
                tbody += "<td>" + cdrData.cdrs[cdr].networkDevice.name + "</td>";
                if (cdrData.cdrs[cdr].pkg != null) {
                    tbody += "<td>" + cdrData.cdrs[cdr].pkg.name + "</td>";
                }
                if (cdrData.cdrs[cdr].service != null) {
                    tbody += "<td>" + cdrData.cdrs[cdr].service.name + "</td>";
                }
                tbody += "<td><strong>" + cdrData.categories[cdrData.cdrs[cdr].quality] + "</strong></td>";
                for (var cat in cdrData.categories) {
                    tbody += "<td><div data-toggle='tooltip' title='Value: " + cdrData.cdrs[cdr].categories[cat].value + " - Unique subs: " + cdrData.cdrs[cdr].categories[cat].uniqSubs + "'>" + cdrData.cdrs[cdr].categories[cat].relativeValue.toFixed(2) + "%</div></td>";
                }
                tbody += "<td><div data-toggle='tooltip' title='Value: " + cdrData.cdrs[cdr].streams.value + ".'>" + cdrData.cdrs[cdr].streams.relativeValue.toFixed(2) + "%</div></td>";
                tbody += "</tr>";
            }
            tbody += "</tbody>";
            $("#template-result-panel #tabla").append(tbody);
        } else {
            $("#template-result-panel #timestamp").text("No results found");
        }
    }
</script>
